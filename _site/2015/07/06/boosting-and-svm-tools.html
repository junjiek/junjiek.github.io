<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]-->

<title>使用Dropzone和七牛云存储来优化博客图床 | 柯均洁的博客</title>
<meta name="author" content="柯均洁">

  <meta name="keywords" content="Dropzone,Qiniu,七牛,图床,博客">




<link rel="shortcut icon" href="http://img6.douban.com/view/photo/photo/public/p2254493685.jpg" />

<link rel="stylesheet" type="text/css" href="/assets/css/style.css">

<link href="/pages/rss.xml" rel="alternate" title="柯均洁的博客" type="application/atom+xml">
  </head>
  <body>
    <aside id="sidebar">
  <nav id="tags">
    <a href="/index.html" id="avatar" style="background-image:url(http://ww1.sinaimg.cn/thumb180/6a5b2847jw1dstk863du5j.jpg)"></a>

    <ul id="tags__ul">
      <li id="pl__all" class="tags__li tags-btn active">所有文章</li>
       
        <li id="工具" class="tags__li tags-btn">工具</li>
      
    </ul>

    <div id="tags__bottom">
      <a href="mailto:kjj3300@163.com" id="icon-email" class="tags-btn fontello"></a>
      <a href="/pages/rss.xml" id="icon-feed" class="tags-btn fontello"></a>
    </div>
  </nav> <!-- end #tags -->

  <div id="posts-list">
    <form action="" id="search-form">
      <a href="/index.html" id="mobile-avatar" style="background-image:url(http://ww1.sinaimg.cn/thumb180/6a5b2847jw1dstk863du5j.jpg)"></a>
      <!-- NOTE: input field is disabled by default -->
      <input id="search-input" type="text" placeholder="Search..." disabled >
    </form>

    <nav id="pl__container">
    
      <a class="工具 pl__all" href="/2015/07/06/boosting-and-svm-tools.html"><span class="pl__circle"></span><span class="pl__title">使用Dropzone和七牛云存储来优化博客图床</span><span class="pl__date">Jul 2015</span></a>
    
    </nav>
  </div> <!-- end #posts-list -->
</aside> <!-- end #sidebar -->
    <div id="post">
      <div id="pjax">
        <article id="post__content">
  <h1 id="post__title" data-identifier="20150706">使用Dropzone和七牛云存储来优化博客图床</h1>
  <blockquote>
  <p>之前我在用SAE的Storage作为博客图床，但是令我非常不爽的是没有一个很好的上传和获得公共链接的方法。现在总算用Dropzone和七牛把这个问题解决了，下面是我上传图片和获得URL的操作，方法再往下看。</p>
</blockquote>

<p><img src="http://7u2ho6.com1.z0.glb.clouddn.com/tool-qiniu-workflow.gif" alt="七牛操作流" /></p>

<h2 id="section">设置七牛帐号</h2>

<blockquote>
  <p><a href="http://www.qiniu.com">七牛</a>是国内口碑不错的一个云存储为主的公司。它的特点应该就在图片存储上，有非常方便的上传SDK和图片处理流，用来作为博客图床非常合适，而且价格不贵，每月有免费的10G流量。</p>
</blockquote>

<ol>
  <li>
    <p>去七牛注册帐号</p>

    <p>刚刚创建的帐号是测试帐号，完成个人认证就可以成为标准帐号，获得10G的存储空间和各10G的上传下载流量。</p>

    <p><img src="http://7u2ho6.com1.z0.glb.clouddn.com/tool-qiniu-normal-account.png" alt="标准帐号" /></p>
  </li>
  <li>
    <p>创建一个空间</p>

    <p>创建空间也比较容易，记得选择公开空间。</p>

    <p><img src="http://7u2ho6.com1.z0.glb.clouddn.com/tool-qiniu-create-bucket.png" alt="创建空间" /></p>
  </li>
</ol>

<h2 id="dropzone">设置Dropzone</h2>

<blockquote>
  <p><a href="https://aptonic.com/dropzone3/">Dropzone</a>是我很早就非常喜欢的一个软件。它通过拖拽的方式，增强了文件的处理流程。一直懒得给它开发插件，没想到七牛的SDK如此好用，所以今天折腾了一下搞定了。</p>
</blockquote>

<ol>
  <li>
    <p>下载软件</p>

    <p>这个软件可以在App Store上直接购买，但是买到的是功能受限的，它不能操作外部文件。不过没有关系，再从官网上下载非沙箱版本，然后覆盖掉Application文件夹下的即可。</p>
  </li>
  <li>
    <p>安装Qiniu插件</p>

    <p>我把这个插件放到了<a href="https://github.com/suyan/scripts/tree/master/Dropzone%20Action">Github</a>上，戳<a href="https://github.com/suyan/scripts/blob/master/Dropzone%20Action/Qiniu.dzbundle.zip?raw=true">这里</a>下载。</p>
  </li>
  <li>
    <p>安装插件</p>

    <p>下载后的是一个zip包，把这个包解压以后双击安装即可。</p>
  </li>
  <li>
    <p>安装Qiniu的Ruby库</p>

    <p><code>
 sudo gem install qiniu
</code></p>
  </li>
  <li>
    <p>启用插件</p>

    <p>从增加列表中选择我们安装好的七牛插件。</p>

    <p><img src="http://7u2ho6.com1.z0.glb.clouddn.com/tool-use-bundle.png" alt="启用插件" /></p>

    <p>然后填写配置：</p>

    <ul>
      <li>server: 七牛上的空间名</li>
      <li>username: 七牛的access_key</li>
      <li>password: 七牛的secret_key</li>
      <li>remote path(可选): 本地同步图片的目录，如果你希望本地也存一份图片，选一个地址即可</li>
      <li>root url: 七牛的公共链接根目录</li>
    </ul>

    <p><img src="http://7u2ho6.com1.z0.glb.clouddn.com/tool-qiniu-access-key.png" alt="access key" /></p>

    <p><img src="http://7u2ho6.com1.z0.glb.clouddn.com/tool-qiniu-root-url.png" alt="root url" /></p>
  </li>
</ol>

<h2 id="section-1">其他建议</h2>

<p>利用Dropzone还有很多可利用的技巧，例如增加一个ImageOptim应用来压缩图片，然后再进行上传。</p>

<p>对于临时图片，可以直接上传到Imgur获得链接。</p>

</article> <!-- end #post__content -->

<div id="post__share">
  <a id="icon-twitter" class="fontello" href="https://twitter.com/intent/tweet?url=http://junjiek.com/2015/07/06/boosting-and-svm-tools.html&text=使用Dropzone和七牛云存储来优化博客图床" target="_blank"></a>
  <a id="icon-cc" class="fontello" href="http://creativecommons.org/licenses/by-nc-sa/3.0" target="_blank"></a>
  <a id="icon-weibo" class="fontello" href="http://v.t.sina.com.cn/share/share.php?url=http://junjiek.com/2015/07/06/boosting-and-svm-tools.html&title=使用Dropzone和七牛云存储来优化博客图床" target="_blank"></a>
</div> <!-- end #post__share -->
<div id="disqus_thread" name="junjiekcom">
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink" target="_blank">Loading Disqus comments...</a>
</div>


        <p id="copyright">Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>&nbsp;&nbsp;|&nbsp;&nbsp;Theme <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll</a>&nbsp;&nbsp;|&nbsp;&nbsp;Hosted on <a href="https://pages.github.com" target="_blank">Github</a></p>
      </div> <!-- end #pjax -->

      <div id="post__toc-trigger">
        <div id="post__toc">
          <span id="post__toc-title">Table of Contents</span>
          <ul id="post__toc-ul"></ul>
        </div>
      </div>
    </div> <!-- end #post -->

    <button id="js-fullscreen"><span id="icon-arrow" class="fontello"></span></button>

<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.pjax.js"></script>
<script src="/assets/js/nprogress.js"></script>
<script src="/assets/js/script.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-64827079-1', 'junjiek.com');
  ga('send', 'pageview');
</script>
  </body>
</html>